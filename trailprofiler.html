<!DOCTYPE html>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<div id="app">
    <div class="container m-5">
        <h1>Trail Data</h1>
        <table>
            <tr v-for="point in points">
                <td>{{ point }}</td>
            </tr>
        </table>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script>

    let vm = new Vue({
        el: '#app',
        data: {
            points: []
        }
    });
    
    // hardcode sample data for now
    let txt = `
        <trk>
        <name>2014-06-30 HIKE #1 THINGVELLIR</name>
        <extensions>
        <gpxx:TrackExtension>
            <gpxx:DisplayColor>Cyan</gpxx:DisplayColor>
        </gpxx:TrackExtension>
        </extensions>
        <trkseg>
        <trkpt lat="64.022506875917315" lon="-21.211569970473647">
            <ele>79.780000000000001</ele>
            <time>2014-06-29T09:00:32Z</time>
        </trkpt>
        <trkpt lat="64.022516766563058" lon="-21.211741799488664">
            <ele>79.540000000000006</ele>
            <time>2014-06-29T09:00:43Z</time>
        </trkpt>
        <trkpt lat="64.022527663037181" lon="-21.211679941043258">
            <ele>79.239999999999995</ele>
            <time>2014-06-29T09:00:46Z</time>
        </trkpt>
        </trkseg>
        </trk>
    `

    // convert to xml doc
    if (window.DOMParser)
    {
        parser = new DOMParser();
        xmlDoc = parser.parseFromString(txt, "text/xml");
    }
    else // Internet Explorer
    {
        xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = false;
        xmlDoc.loadXML(txt);
    }

    // extract data from XML
    let points = xmlDoc.getElementsByTagName("trkpt");
    for (let p in points) {
        let newPoint = {
            "time": points[p].getElementsByTagName("time")[0].innerHTML,
            "latitude": points[p].getAttribute("lat"),
            "longitude": points[p].getAttribute("lon"),
            "elevation": points[p].getElementsByTagName("ele")[0].innerHTML
        };
        vm.points.push(newPoint);
    }

</script>